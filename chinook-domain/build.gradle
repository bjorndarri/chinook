plugins {
    id "chinook.library"
}

apply plugin: BuildReportsPlugin

dependencies {
    api project(":chinook-domain-api")
    implementation "is.codion:codion-common-rmi:${version}"
    implementation "is.codion:codion-framework-db-local:${version}"

    runtimeOnly "commons-logging:commons-logging:${commonsLoggingVersion}"
    runtimeOnly ("commons-digester:commons-digester:${commonsDigesterVersion}") {
        transitive = false
    }
    runtimeOnly "org.apache.commons:commons-collections4:${commonsCollectionsVersion}"
    runtimeOnly ("commons-beanutils:commons-beanutils:${commonsBeanUtilsVersion}") {
        transitive = false
    }
    runtimeOnly "org.eclipse.jdt:ecj:${ecjVersion}"

    testImplementation "is.codion:codion-framework-domain-test:${version}"
    testRuntimeOnly "is.codion:codion-dbms-h2database:${version}"
    testRuntimeOnly "com.h2database:h2:${h2Version}"
    testImplementation "org.junit.jupiter:junit-jupiter-api:${junitVersion}"
    testRuntimeOnly "org.junit.jupiter:junit-jupiter-engine:${junitVersion}"
}

test {
    useJUnitPlatform()
    systemProperty "codion.test.user", "scott:tiger"
    systemProperty "codion.db.url", "jdbc:h2:mem:h2db"
    systemProperty "codion.db.initScripts", "classpath:create_schema.sql"
}

buildReports {
    sourceDir = file("src/main/reports")
    targetDir = file(sourceSets.main.output.resourcesDir.toString() + "/is/codion/framework/demos/chinook/domain")
}