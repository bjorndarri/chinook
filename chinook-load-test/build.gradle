plugins {
    id "de.jjohannes.extra-java-module-info" version "${extraJavaModuleInfoVersion}"
}

apply plugin: 'application'

dependencies {
    implementation project(':chinook-domain-api')
    implementation project(':chinook-client')

    implementation "is.codion.jdk11:codion-swing-common-tools-ui:${version}"
    implementation "is.codion.jdk11:codion-swing-framework-ui:${version}"
    implementation "is.codion.jdk11:codion-swing-framework-tools:${version}"

    runtimeOnly "is.codion.jdk11:codion-framework-db-rmi:${version}"
}

apply from: "../extra-module-info-jasperreports.gradle"

application {
    mainModule = "is.codion.framework.demos.chinook.client.loadtest"
    getMainClass().set("is.codion.framework.demos.chinook.client.loadtest.ChinookLoadTest")
}

task runRmi(type: JavaExec) {
    group 'application'
    mainClass.set(application.getMainClass())
    classpath = sourceSets.main.runtimeClasspath
    systemProperties = [
            'codion.client.connectionType'    : 'remote',
            'codion.server.hostname'          : "${serverHost}",
            'codion.server.registryPort'      : "${serverRegistryPort}",
            'javax.net.ssl.trustStore'        : '../chinook-server/config/truststore.jks',
            'javax.net.ssl.trustStorePassword': 'crappypass'
    ]
}